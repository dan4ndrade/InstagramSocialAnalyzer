<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Gerenciar Página | SMA</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet" />

    <!-- Animation library for notifications -->
    <link href="css/animate.min.css" rel="stylesheet" />

    <!-- Paper Dashboard core CSS -->
    <link href="css/paper-dashboard.css" rel="stylesheet" />

    <!-- Fonts and icons -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css' />
    <link href="css/themify-icons.css" rel="stylesheet" />

    <!-- Custom stylesheet -->
    <link href="css/custom.css" rel="stylesheet" />

    <script type="text/javascript" src="js/utils.js" />

</head>

<!-- Core JS Files -->
<script src="js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>

<!-- Checkbox, Radio & Switch Plugins -->
<script src="js/bootstrap-checkbox-radio.js"></script>

<!-- Notifications Plugin -->
<script src="js/bootstrap-notify.js"></script>

<!-- Paper Dashboard Core -->
<script src="js/paper-dashboard.js"></script>

<body th:onload="'showReturnMessagePost(\'' + ${resultpost} + '\');'">

<!-- Loading overlay -->
<div class="loading-overlay">
    <div id="loading-img">
        <div class="loading-text">
            Social Media Analyzer
        </div>
    </div>
</div>

<div class="wrapper">

    <!-- Side menu -->
    <div class="sidebar" data-background-color="blue" data-active-color="success">

        <!--
            Tip 1: you can change the color of the sidebar's background using: data-background-color="white | black"
            Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        -->

        <!-- Side navbar -->
        <div class="sidebar-wrapper">
            <div class="logo">
                <a href="#" class="simple-text">
                    Social Media Analyzer
                </a>
            </div>

            <ul class="nav">
                <li class="loading">
                    <a href="/search">
                        <i class="ti-bar-chart"></i>
                        <p>Pesquisa</p>
                    </a>
                </li>
                <li class="loading">
                    <a href="/page">
                        <i class="ti-user"></i>
                        <p>Minha Página</p>
                    </a>
                </li>
            </ul>

        </div>
        <!-- END Side Navbar -->
    </div>
    <!-- END Side menu -->

    <div class="main-panel">
        <!-- Top menu -->
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar bar1"></span>
                        <span class="icon-bar bar2"></span>
                        <span class="icon-bar bar3"></span>
                    </button>
                    <a class="navbar-brand" href="#" th:text="${pagename != null ? 'Gerenciar Página - ' + pagename : 'Gerenciar Página'}"></a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="ti-settings"></i>
                                <p class="options"></p>
                                <p>Configurações</p>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#" data-toggle="modal" data-target="#popUpWindow">
                                        <p align="center">Alterar página <i class="fa fa-exchange text-primary" aria-hidden="true"></i></p>
                                    </a>
                                </li>
                                <li>
                                    <a href="/logout=">
                                        <p align="center">Logout <i class="fa fa-sign-out text-primary" aria-hidden="true"></i></p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- END Top menu -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">

                <!-- Top row -->
                <div class="row">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Selecione o que deseja fazer</h4>
                            <p class="category">Área reservada para gerenciar conteúdos direto na página do Facebook</p>
                        </div>
                        <div class="content">
                            <!-- Split button -->
                            <div class="bs-example">
                                <div class="panel-group" id="accordion">
                                    <div class="panel panel-default">
                                        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                            <h4 class="panel-title">
                                                Postar conteúdo
                                            </h4>
                                        </div>
                                        <div id="collapseOne" class="panel-collapse collapse">
                                            <div class="panel-body">
                                                <p class="category">Área reservada para criar uma nova publicação</p>
                                                <form action="/management=publication" method="POST">
                                                            <textarea cols="60" rows="5" name="postmessage" maxlength="500" wrap="hard"
                                                                      placeholder="O que você está pensando?"></textarea>
                                                    <br />
                                                    <!--
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                            <span class="selection">Público</span><span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu" id="post_type" role="menu">
                                                            <li><a href="#">Público</a></li>
                                                            <li><a href="#">Privado</a></li>
                                                        </ul>
                                                    </div>
                                                    -->
                                                    <p class="category" th:text="${resultpost}"/>
                                                    <br/><button type="submit" class="btn btn-inverse">Publicar</button>
                                                    Agendar <input type='text' name="postdatetime" placeholder="DD/MM/YYYY HH:MM" />
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                            <h4 class="panel-title">
                                                Procurar usuário
                                            </h4>
                                        </div>
                                        <div id="collapseTwo" class="panel-collapse collapse">
                                            <div class="panel-body">
                                                <p class="category">Qual usuário deseja vasculhar?</p>
                                                <textarea cols="40" rows="1" name="username" maxlength="30" wrap="hard"
                                                          placeholder=""></textarea>
                                                <p class="category" th:text="${resultpost}"/>
                                                <br/>
                                                <button id="btnUserSearch" class="btn btn-inverse">Procurar</button>
                                                <script type="text/javascript">

                                                    $(document).ready(function() {
                                                        function searchUser() {
                                                            var username = $("textarea[name='username']")[0].value;
                                                            $.ajax({
                                                                type: 'POST',
                                                                url: '/search=user',
                                                                data: 'username='+username,
                                                            })
                                                                .done(function(data) {
                                                                    console.log("success");
                                                                    console.log(data)
                                                                    $("div[id='divUserResult']")[0].append(document.createElement('hr'));
                                                                    $("div[id='divUserResult']")[0].append(JSON.stringify(data));
                                                                })
                                                                .fail(function() {
                                                                    console.log("Error when access data user with ajax.");
                                                                });
                                                        }
                                                        $("button[id='btnUserSearch']")[0].addEventListener("click", searchUser);
                                                    });
                                                </script>

                                                <br/><br/>

                                                <div id="divUserResult">
                                                </div>

                                                <div th:each="result:${feed}">
                                                    <b th:text="${result.full_name}">from</b> escreveu:
                                                    <p th:text="${result.biography}">message text</p>
                                                    <img th:if="${result.profile_pic_url}" th:src="${result.profile_pic_url}"/>
                                                    <hr/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END Top row -->
            </div>
            <!-- End container-fluid -->
        </div>
        <!-- END Main content -->
    </div>
    <!-- End main-panel -->
</div>
<!-- END wrapper -->

<!-- Change FB page Popup -->
<div class="modal fade" id="popUpWindow">
    <div class="modal-dialog">
        <div class="modal-content text-center">

            <!-- header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">Suas páginas:</h3>
            </div>

            <!-- (pageselect) -->
            <div class="modal-body">
                <form role="form" method="POST" action="/pageselect" name="formSelectPage">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span class="selection">Selecione uma página </span><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" id="listed_pages" role="menu">
                            <li class="loading" th:each="page_att:${listed_pages}"><a href="#" th:text="${page_att.name}+' '" th:value="${page_att.id}"></a></li>
                        </ul>
                    </div>
                    <br />
                    <input type="hidden" name="pageid" id="pageid"/>
                    <input type="hidden" name="destiny" value="/management" />
                </form>
                <br/>
            </div>
            <!-- (pageselect) -->
        </div>
    </div>
</div>
<!-- END Change FB page Popup -->

</body>

</html>